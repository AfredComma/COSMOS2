#!/usr/bin/env python
"""
Runs a script that lives in S3
"""
import argparse
import subprocess
import tempfile


def main(s3_uri):
    with tempfile.NamedTemporaryFile() as fp:
        subprocess.check_call('aws s3 cp --quiet {s3_uri} {fp.name}'.format(**locals()), shell=True)
        subprocess.check_call('chmod +x {fp.name}'.format(**locals()), shell=True)
        subprocess.check_call(fp.name)


if __name__ == '__main__':
    p = argparse.ArgumentParser()
    p.add_argument('s3_uri')
    args = p.parse_args()
    main(args.s3_uri)
